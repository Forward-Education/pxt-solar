# Current Monitor Tutorial - Forward Education
```package
fwd-smart-solar=github:Forward-Education/pxt-smart-solar#v1.0.3
```

## Sun-Tracking Solar Panel - Use Tutorial @showdialog
Today, you are going to code a monitor that measures the current (the flow of electricity) generated by your solar panel. Youâ€™ll then convert this measurement into a visual display on your micro:bit, showing you how much electricity is flowing in real-time!

<img src="https://raw.githubusercontent.com/Forward-Education/pxt-solar/main/curriculum/projects/current-monitor/render.png" alt="Current monitor solar panel render" style="display: block; width: 100%; margin:auto;">

## Step 1 @showdialog
IMPORTANT! Make sure your Climate Action Kit Breakout Board is turned on and your micro:bit is plugged into your computer.

<img src="https://raw.githubusercontent.com/Forward-Education/pxt-solar/main/curriculum/general-assets/pluganim.webp" alt="Plug micro:bit into USB port on computer" style="display: block; width: 40%; margin:auto;">

## Step 2 @showdialog
Click the three dots beside the ``|Download|`` button, then click on _Connect Device_.
Next, follow the steps to pair your micro:bit.

<img src="https://raw.githubusercontent.com/Forward-Education/pxt-solar/main/curriculum/general-assets/pairmicrobitGIF.webp"  alt="Pairing gif" style="display: block; width: 60%; margin:auto;">

## Step 3
We want our micro:bit to constantly check the current. We'll use a **loop** for this. 

Drag an ``||Loops:every 500 ms||`` loop from the ``||Loops:Loops||`` drawer into the coding workspace.

~hint Tell me more!
- A loop is a sequence of instructions that is continually repeated until a certain condition is met. Think of it like a set of instructions you tell your micro:bit to do over and over again.
hint~

```blocks
loops.everyInterval(500, function () {
	
})
```

## Step 4
Next, we'll need to use a **conditional statement** to check the current value and display a specific pattern.

From the ``||Logic:Logic||`` drawer, drag an ``||Logic:if then else||`` block into the workspace. 

~hint Tell me more!
- A conditional statement (often called an "if-then-else" statement) is a fundamental concept in programming that allows your code to _make decisions_. It's like telling your micro:bit: "IF this condition is true, THEN do this."
- We use conditional statements to make decisions in real-life, too! For example, if it is raining, then I bring my umbrella! 
hint~

```blocks
loops.everyInterval(500, function () {
    // @highlight
    if (true) {
    	
    } else {
    	
    }
})

```

## Step 5
Our first condition will be for a **low current**. We want the code to say:

**IF** the current is low (between 5 mA and 20 mA), **THEN** light up a single LED on the micro:bit's display.

## Step 6
Drag the following blocks into the workspace:

- two ``||Logic:0 < 0||`` comparison operator blocks
- one ``||Logic:AND||`` Boolean operator block
- two ``||fwdSensors:current (mA)||`` reporter blocks

## Step 7
Combine the blocks to write the first part of the conditional statement (also known as the "hypothesis") so it reads:

**IF** the current is greater than 5 mA AND less than or equal to 20 mA...

```blocks
loops.everyInterval(500, function () {
    // @highlight
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
    	
    } else {
    	
    }
})
```

## Step 8
Drag a ``||Basic:show LEDs||`` block into the conclusion of the conditional statement, so that it reads:

**THEN** show a single LED on the micro:bit's display.

```blocks
loops.everyInterval(500, function () {
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else {
    	
    }
})
```

## Step 9
Click the '+' icon on the bottom of the conditional to create 4 new ``||logic:else if||`` statements.

```blocks
loops.everyInterval(500, function () {
    // @highlight
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (false) {
    	
    } else if (false) {
    	
    } else if (false) {
    	
    } else if (false) {
    	
    } else {
    	
    }
})
```

## Step 10
Right click on the first hypothesis and select 'Duplicate'. Drag this new hypothesis into the second conditional statement.

Repeat for each blank conditional.

```blocks
loops.everyInterval(500, function () {
    // @highlight
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
    	
    } else if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
    	
    } else if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
    	
    } else if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
    	
    } else {
    	
    }
})
```

## Step 11
Edit the values in each hypothesis, so you have the following:
- **IF** the current is greater than 20 mA _and_ less than or equal to 40 mA...
- **IF** the current is greater than 40 mA _and_ less than or equal to 60 mA...
- **IF** the current is greater than 60 mA _and_ less than or equal to 80 mA...
- **IF** the current is greater than 80 mA...

```blocks
loops.everyInterval(500, function () {
    // @highlight
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 20 && fwdSensors.current1.current() <= 40) {
    	
    } else if (fwdSensors.current1.current() > 40 && fwdSensors.current1.current() <= 60) {
    	
    } else if (fwdSensors.current1.current() > 60 && fwdSensors.current1.current() <= 80) {
    	
    } else if (fwdSensors.current1.current() > 80) {
    	
    } else {
    	
    }
})
```

## Step 12
Right click the ``||Basic:show LEDs||`` block in the first conditional and select 'Duplicate'. Drag this new block into the conclusion of the second conditional statement.

Repeat for each blank conditional.

```blocks
loops.everyInterval(500, function () {
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 20 && fwdSensors.current1.current() <= 40) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 40 && fwdSensors.current1.current() <= 60) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 60 && fwdSensors.current1.current() <= 80) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 80) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else {
    	
    }
})
```

## Step 13
Customize the LED display blocks, so that each conclusion says:
- **IF** the current is greater than 20 mA and less than or equal to 40 mA, **THEN** light up nine LEDs on the micro:bit's display.
- **IF** the current is greater than 40 mA and less than or equal to 60 mA, **THEN** light up fourteen LEDs on the micro:bit's display.
- **IF** the current is greater than 60 mA and less than or equal to 80 mA, **THEN** light up nineteen LEDs on the micro:bit's display.
- **IF** the current is greater than 80 mA, **THEN** light up twenty-three LEDs on the micro:bit's display.

~hint Tell me more!
- Remember, the LEDs are a visual representation of the strength of the current.
- Check out the lightbulb hint to see how we've solved this, but feel free to get creative with your displays!
hint~

```blocks
loops.everyInterval(500, function () {
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 20 && fwdSensors.current1.current() <= 40) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . . . .
            . . # . .
            . # # # .
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 40 && fwdSensors.current1.current() <= 60) {
        // @highlight
        basic.showLeds(`
            . . . . .
            . . # . .
            . # # # .
            # # # # #
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 60 && fwdSensors.current1.current() <= 80) {
        // @highlight
        basic.showLeds(`
            . . # . .
            . # # # .
            # # # # #
            # # # # #
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 80) {
        // @highlight
        basic.showLeds(`
            . # # # .
            # # # # #
            # # # # #
            # # # # #
            # # # # #
            `)
    } else {
    	
    }
})
```

## Step 14
Drag a ``||basic:show icon||`` block into the final ``||logic:else||`` condition. Change the heart to an 'X' to signify no current!

```blocks
loops.everyInterval(500, function () {
    if (fwdSensors.current1.current() > 5 && fwdSensors.current1.current() <= 20) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . . . .
            . . . . .
            . . # . .
            `)
    } else if (fwdSensors.current1.current() > 20 && fwdSensors.current1.current() <= 40) {
        basic.showLeds(`
            . . . . .
            . . . . .
            . . # . .
            . # # # .
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 40 && fwdSensors.current1.current() <= 60) {
        basic.showLeds(`
            . . . . .
            . . # . .
            . # # # .
            # # # # #
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 60 && fwdSensors.current1.current() <= 80) {
        basic.showLeds(`
            . . # . .
            . # # # .
            # # # # #
            # # # # #
            # # # # #
            `)
    } else if (fwdSensors.current1.current() > 80) {
        basic.showLeds(`
            . # # # .
            # # # # #
            # # # # #
            # # # # #
            # # # # #
            `)
    } else {
        // @highlight
        basic.showIcon(IconNames.No)
    }
})
```

## Download
Click the ``|Download|`` button to download the code to your solar panel project and test it out!

## Reflection
Before we wrap up:
- List 2 new things you learned today.
- What is one thing you want to learn more about?

## Finished
Click the ``|Done|`` button to finish this tutorial.